// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⣿⣿⣿⣿⣿⣽⣿⣿⣿⣿⣿⣿⣿⣾⣭⡟⣟⢿⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⣿⣿⣿⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⣷⣲⣿⣻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⣿⣿⠟⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢿⣿⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⣿⣏⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣾⡿⡯⣿⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⣿⣿⣿⣿⣿⠟⢩⣟⡿⣿⡿⢿⠛⠛⠙⠋⠛⢛⢿⣿⣟⣷⠋⣿⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⣿⣿⣿⣟⠉⠀⠀⠂⠂⠁⠀⠈⠀⠀⠀⠀⠀⠀⠂⢻⣿⣯⣻⢹⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⣿⣿⣷⢸⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⡟⢿⣿⠀⢀⣴⣶⣶⣶⣶⡄⠀⢀⣶⣶⣶⣶⣤⡀⠀⢻⣿⣿⣯⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⡧⠸⣿⠀⠈⠛⠋⢙⣻⠿⠃⠀⠘⠿⡟⠻⠿⢿⡏⠀⠘⣿⣿⣁⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⡋⣠⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠀⠀⠀⠀⠀⠀⠀⢟⣀⠙⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⡅⠠⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠅⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⣷⣀⣺⡄⠀⠀⠀⠀⠀⠻⣶⣶⠾⠗⠀⠀⠀⠀⠀⠀⢠⠄⠀⣸⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⣿⣿⣿⣧⠀⠀⠀⢀⣀⣀⣈⣉⣀⡀⢀⠀⠀⠀⠀⠀⠈⢱⣾⣿⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⣿⣿⣿⣿⣦⠀⢀⠉⠈⢉⣉⣉⣉⠙⠛⠇⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⣿⣿⣿⣿⣿⣧⠀⠊⠀⠉⠛⠛⠛⠉⠒⠁⠀⠀⠀⠀⠀⠀⠹⣿⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⡈⢢⣰⣠⣶⣤⣄⣀⣀⣤⣶⡃⠀⠀⡀⠙⣀⣬⣿⣿⣿⣿⣿⣿⣿
// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣇⠀⠛⣿⣿⣿⣿⣿⣿⣿⠟⠁⠀⠀⣰⣿⠟⠻⣦⡈⠢⣙⢿⣿⣿
// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡄⢨⣽⣿⣿⣿⣿⣿⣟⡰⣀⣠⣾⣿⣿⣿⣦⡈⠻⢦⣈⠢⡙⢻⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀

const server = require("./src/app.js");
const { conn } = require("./src/db.js");
const poblarBaseDeDatos = require("./src/seeders/cargaBaseDeDatos.js");

// Syncing all the models at once.
// hooks
require("./src/Helpers/updateReviews.js");

const PORT = process.env.PORT || 3001

conn.sync({ force: false }).then(() => {
  poblarBaseDeDatos(); //comentada para evitar muchas consultas, usar endpoint
  server.listen(PORT, () => {
    console.log("%s listening at 3001"); // eslint-disable-line no-console
  });
});
